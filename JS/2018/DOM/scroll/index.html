<!DOCTYPE html>
<html>
<head>
<title>Трям</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<link href="reset.css" rel="stylesheet" type="text/css">
<link href="style.css" rel="stylesheet" type="text/css">
<link href="aos.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery-3.0.0.js"></script>
<script type="text/javascript" src="anime.js"></script>

</head>

<body>

<header><h1>Заголовок</h1>
	<div></div>
</header>

<article>
	<section><h2>Контент</h2>
		<div></div>
	</section>

	<aside><h2>Сбоку</h2>
		<div></div>
	</aside>
</article>


<div id="keyframes" >
  <div class="square el fix"></div>
</div>

<footer><h2>Футер</h2></footer>

<script>
 	var progress;
 	function getProgress () {
 		var el = document.documentElement;
 		var fullWay = el.scrollHeight - el.clientHeight;
 		var passWay = fullWay - el.scrollTop;
 		progress = 100 - ( passWay * ( 1 / fullWay ) * 100 )^0 ;
 	};

 	setInterval( function ( ) {
 		getProgress ();
 		var ddel = document.documentElement;
 		$(".fix").empty().append( "<p>" + progress + " %</p>");
 		$(".fix").css({"background":"rgba("+(250-progress*2.5)+","+188+","+(progress*2.5)+",0.5)"});
 		$("aside").css({"background":"rgba("+(250-progress*2.5)+","+188+","+(progress*2.5)+",0.3)"});
 		if ( progress > 50 ) {
 			var keyframes = anime({
				targets: '#keyframes .el',
				translateX: [
					{ value: ddel.clientWidth/1.5, duration: 1000, elasticity: 0 },
				],
				scaleX: [
					{ value: 4, duration: 100, delay: 1500, easing: 'easeOutExpo' },
					{ value: 1, duration: 900, elasticity: 300 },
				]
			});
 		} else {
			var keyframes = anime({
				targets: '#keyframes .el',
				translateX: [
					{ value: 0, duration: 1000, elasticity: 0 }
				],
				scaleX: [
					{ value: 4, duration: 100, delay: 1500, easing: 'easeOutExpo' },
					{ value: 1, duration: 900, elasticity: 300 }
				]
			});
 			
 		}
 	}, 100 );
 	

</script>
</body>
</html>